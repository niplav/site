#!/usr/bin/env rc

prodfile='/home/niplav/proj/site/data/productivity.csv'
creafile='/home/niplav/proj/site/data/creativity.csv'

thisdate=`{date --iso-8601}
deadline=`{date --date'='$thisdate'T20:00' '+%s'}
now=`{date '+%s'}
nowiso=`{date --iso-8601'=seconds'}

fn readval {
	dmenu -l 10 -fn 'monospace:size=10' -nb '#ffffff' -nf '#000000' -sb '#ffb405'
}

if(! grep $thisdate $prodfile >/dev/null && [ $now -ge $deadline ]) {
	productivity=`{echo 'productivity' | readval}
	printf '%s,%s\n' $nowiso $productivity >>$prodfile
}

if(! grep $thisdate $creafile >/dev/null && [ $now -ge $deadline ]) {
	creativity=`{echo 'creativity' | readval}
	printf '%s,%s\n' $nowiso $creativity >>$creafile
}
