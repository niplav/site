#!/usr/bin/env rc

fn search {
	ag --ignore 'code/sitelint' $1
}

fn encheck {
	aspell -x -l en check $1
}

fn decheck {
	aspell -x -l de check $1
}

for(i in `{ag -l 'language: english' | grep -v sitelint})
	encheck $i

for(i in `{ag -l 'language: german' | grep -v sitelint})
	decheck $i

#Uses: [ag](https://geoff.greer.fm/ag/)

echo 'Incorrectly formatted citations:'

#short form
search '\[[A-Za-z]+,( |\n)-?[0-9]+\]'

#long form
search '^\*â€“[^ ]'

echo 'Incorrect whitespace:'

search '   $'
search '\t$'

echo 'Checking for british english:'

search 'colour|grey|labour|theatre|behaviour'

echo 'Number of TODOs:'

search TODO | wc -l
